<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Boot Library API Documentation</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 1280px;
        margin: 0 auto;
        padding: 20px;
        line-height: 1.6;
      }
      h1,
      h2,
      h3 {
        color: #333;
      }
      h1 {
        font-size: 2.5em;
        margin-bottom: 0.5em;
      }
      h2 {
        font-size: 2em;
        margin-top: 1.5em;
      }
      h3 {
        font-size: 1.5em;
        margin-top: 1.2em;
      }
      pre,
      code {
        padding-left: 20px;
        overflow-x: auto;
        font-size: 1.1rem;
        max-width: 100%;
        white-space: pre-wrap;
        word-wrap: break-word;
      }
      .payload,
      .success,
      .error {
        border-radius: 5px;
        margin-bottom: 10px;
        padding: 1px 0;
        color: black;
        font-size: 1.2em;
      }
      .payload {
        background: #d0e7ff;
      }
      .success {
        background: #d4edda;
      }
      .error {
        background: #f8d7da;
      }
      .endpoint {
        font-weight: bold;
      }
      .method {
        font-style: italic;
        margin-right: 10px;
      }
    </style>
  </head>
  <body>
    <h1>Boot Library API Documentation</h1>

    <h2>Endpoints</h2>

    <h3>1. Get All Users</h3>
    <p class="endpoint"><span class="method">GET</span> /users</p>
    <p>Fetches all users from the database.</p>

    <h4>Payload</h4>
    <div class="payload">
      <pre><code>No request body required</code></pre>
    </div>

    <h4>Response on Success</h4>
    <div class="success">
      <pre><code>[ { "id": 1, "name": "John Doe" },
    { "id": 2, "name": "Jane Doe" }, ... ]</code></pre>
    </div>

    <h4>Errors</h4>
    <div class="error">
      <pre><code>{ "msg": "There're no users in database" }</code></pre>
    </div>

    <h3>2. Get User by ID</h3>
    <p class="endpoint"><span class="method">GET</span> /users/:userId</p>
    <p>Fetches a user by their numeric ID.</p>

    <h4>Payload</h4>
    <div class="payload">
      <pre><code>No request body required</code></pre>
    </div>

    <h4>Response on Success</h4>
    <div class="success">
      <pre><code>{ "id": 1, "name": "John Doe" }</code></pre>
    </div>

    <h4>Errors</h4>
    <div class="error">
      <pre><code>{ "error": "User not found" }</code></pre>
    </div>

    <h3>3. Add a User</h3>
    <p class="endpoint"><span class="method">POST</span> /users</p>
    <p>Adds a new user to the database.</p>

    <h4>Payload</h4>
    <div class="payload">
      <pre><code>{ "name": "Alice Johnson" }</code></pre>
    </div>

    <h4>Response on Success</h4>
    <div class="success">
      <pre><code>{
    "id": 3,
    "name": "Alice Johnson"
  }</code></pre>
    </div>

    <h4>Errors</h4>
    <div class="error">
      <pre><code>{ "error": "All records have failed syntax check, no new records were added" }</code></pre>
    </div>
    <div class="error">
      <pre><code>{ "error": "Internal Server Error" }</code></pre>
    </div>

    <h3>4. Edit User Info</h3>
    <p class="endpoint"><span class="method">PATCH</span> /users/:userId</p>
    <p>Edits user information based on their ID.</p>

    <h4>Payload</h4>
    <div class="payload">
      <pre><code>{ "name": "Alex Boot" }</code></pre>
    </div>

    <h4>Response on Success</h4>
    <div class="success">
      <pre><code>{
    "id": 1,
    "name": "Alex Boot"
  }</code></pre>
    </div>

    <h4>Errors</h4>
    <div class="error">
      <pre><code>{ "error": "User not found" }</code></pre>
    </div>
    <div class="error">
      <pre><code>{ "error": "All records have failed syntax check, no new records were added" }</code></pre>
    </div>
    <div class="error">
      <pre><code>{ "error": "Internal Server Error" }</code></pre>
    </div>

    <h3>5. Delete User</h3>
    <p class="endpoint"><span class="method">DELETE</span> /users/:userId</p>
    <p>Deletes a user from the database.</p>

    <h4>Payload</h4>
    <div class="payload">
      <pre><code>No request body required</code></pre>
    </div>

    <h4>Response on Success</h4>
    <div class="success">
      <pre><code>{ "msg": "User with id 1 deleted successfully." }</code></pre>
    </div>

    <h4>Errors</h4>
    <div class="error">
      <pre><code>{ "error": "User not found" }</code></pre>
    </div>
    <div class="error">
      <pre><code>{ "error": "Internal Server Error" }</code></pre>
    </div>

    <h3>6. Get All Books</h3>
    <p class="endpoint"><span class="method">GET</span> /books</p>
    <p>
      Fetches all books from the database, including total and available copies.
    </p>

    <h4>Payload</h4>
    <div class="payload">
      <pre><code>No request body required</code></pre>
    </div>

    <h4>Response on Success</h4>
    <div class="success">
      <pre><code>[
  {
    "id": 1,
    "title": "1984",
    "author": "George Orwell",
    "coverImage": "link_to_cover_image",
    "totalCopies": 5,
    "copiesInStock": 2
  },
  ...
  ]</code></pre>
    </div>

    <h4>Errors</h4>
    <div class="error">
      <pre><code>{ "msg": "There're no books in database" }</code></pre>
    </div>

    <h3>7. Get Book by ID</h3>
    <p class="endpoint"><span class="method">GET</span> /books/:bookId</p>
    <p>
      Fetches a book by its numeric ID, including total and available copies.
    </p>

    <h4>Payload</h4>
    <div class="payload">
      <pre><code>No request body required</code></pre>
    </div>

    <h4>Response on Success</h4>
    <div class="success">
      <pre><code>{
  "id": 1,
  "title": "1984",
  "author": "George Orwell",
  "coverImage": "link_to_cover_image",
  "totalCopies": 5,
  "copiesInStock": 2
  }</code></pre>
    </div>

    <h4>Errors</h4>
    <div class="error">
      <pre><code>{ "error": "Book not found" }</code></pre>
    </div>

    <h3>8. Rent a Book</h3>
    <p class="endpoint"><span class="method">POST</span> /books/:id/rent</p>
    <p>Rents a book by its ID for a specific user.</p>

    <h4>Payload</h4>
    <div class="payload">
      <pre><code>{ "userId": 1 }</code></pre>
    </div>

    <h4>Response on Success</h4>
    <div class="success">
      <pre><code>{ "copyId": 3 }</code></pre>
    </div>

    <h4>Errors</h4>
    <div class="error">
      <pre><code>{ "error": "No free copies left" }</code></pre>
    </div>
    <div class="error">
      <pre><code>{ "error": "Internal Server Error" }</code></pre>
    </div>

    <h3>9. Return a Book</h3>
    <p class="endpoint"><span class="method">DELETE</span> /books/:id/rent</p>
    <p>Deletes the rental record for a book copy.</p>

    <h4>Payload</h4>
    <div class="payload">
      <pre><code>{ "copyId": 3 }</code></pre>
    </div>

    <h4>Response on Success</h4>
    <div class="success">
      <pre><code>{ "msg": "Rental record deleted successfully." }</code></pre>
    </div>

    <h4>Errors</h4>
    <div class="error">
      <pre><code>{ "error": "This copy of the book is not rented" }</code></pre>
    </div>
    <div class="error">
      <pre><code>{ "error": "Internal Server Error" }</code></pre>
    </div>

    <h3>10. Get All Rentals by User</h3>
    <p class="endpoint">
      <span class="method">GET</span> /users/:userId/rentals
    </p>
    <p>Fetches all rentals for a specific user.</p>

    <h4>Payload</h4>
    <div class="payload">
      <pre><code>No request body required</code></pre>
    </div>

    <h4>Response on Success</h4>
    <div class="success">
      <pre><code>[
    {
      "copyId": 3,
      "rentalDate": "2024-07-30T12:34:56Z",
      "title": "1984",
      "bookId": 1
    },
    ...
  ]</code></pre>
    </div>

    <h4>Errors</h4>
    <div class="error">
      <pre><code>{ "error": "User not found" }</code></pre>
    </div>
    <div class="error">
      <pre><code>{ "error": "This user didn't rent any book" }</code></pre>
    </div>
    <div class="error">
      <pre><code>{ "error": "Internal Server Error" }</code></pre>
    </div>

    <h3>11. Bulk Insert Users or Books</h3>
    <p class="endpoint"><span class="method">POST</span> /bulk/:table</p>
    <p>Inserts multiple users or books in bulk.</p>

    <h4>Payload</h4>
    <div class="payload">
      <pre><code>{ // For users table
    "payload": [
      { "name": "Bob Smith" },
      { "name": "Alex Jones" },
      ...
    ]
  }</code></pre>
    </div>
    <div class="payload">
      <pre><code>{ // For books table
    "payload": [
      { "title": "Brave New World", "author": "Aldous Huxley", "coverImage": "url", "copies": 3 },
      { "title": "1984", "author": "George Orwell", "coverImage": "url", "copies": 3 }
      ...
    ]
  }</code></pre>
    </div>

    <h4>Response on Success</h4>
    <div class="success">
      <pre><code>{ "msg": "2 records have invalid syntax and were automatically rejected. 3 records already exist in database and were automatically rejected. 9 records were successfully added." }</code></pre>
    </div>

    <h4>Errors</h4>
    <div class="error">
      <pre><code>{ "error": "All records have failed syntax check, no new records were added" }</code></pre>
    </div>
    <div class="error">
      <pre><code>{ "error": "All valid records already exist, no new records were added" }</code></pre>
    </div>
    <div class="error">
      <pre><code>{ "error": "Internal Server Error" }</code></pre>
    </div>

    <h3>12. Handle 404 Errors</h3>
    <p class="endpoint"><span class="method">ALL</span> *</p>
    <p>Handles any invalid endpoints not defined in the API.</p>

    <h4>Errors</h4>
    <div class="error">
      <pre><code>{ "error": "Error 404: path not found" }</code></pre>
    </div>
  </body>
</html>
